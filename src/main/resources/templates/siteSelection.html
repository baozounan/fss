<!DOCTYPE html >
<html lang="en" xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" th:href="@{/static/easyui/demo/demo.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/static/easyui/themes/default/easyui.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/static/easyui/themes/icon.css}">
    <script type="text/javascript" th:src="@{/static/easyui/jquery.min.js}"></script>
    <script type="text/javascript" th:src="@{/static/easyui/jquery.easyui.min.js}"></script>
</head>
<body>

<div class="easyui-accordion" style="width:100%;height:800px;">
    <div title="需求聚集" data-options="iconCls:'icon-ok'" style="overflow:auto;padding:33%;">
        <a href="javascript:xuqiujuji()" class="easyui-linkbutton" iconCls="icon-reload">开始寻址</a>
    </div>
    <div title="连续动态" data-options="iconCls:'icon-help'" >
        <form>
            <table>
            <tr>
        <!--输入服务半径-->
                <td>服务半径：</td>
                <td>
                    <input class="easyui-textbox" name="radius" id="radius" style="width: 50px;"></input>
                </td>
                <td>KM</td>
                <td>
                    <a href="javascript:startLianxudongtai()" class="easyui-linkbutton" iconCls="icon-reload" style="width: 100px;">开始寻址</a>
                </td>
                <td> <div id="p" class="easyui-progressbar" style="width:50px;display: none;"></div></td>
            </tr>

            </table>


        </form>

        <table id="airportsInCitydg" title="城镇中包含的机场数量" style="width:100%;height:80%" data-options="
				rownumbers:true,
				singleSelect:true,
				autoRowHeight:false,
				pagination:true,
				pageSize:10">
            <thead>
            <tr>

                <th field="cityName" width="150" align="center">城市名称</th>
                <th field="cityLon" width="80" align="center">经度</th>
                <th field="cityLat" width="80" align="center">纬度</th>
                <th field="count" width="80" align="center">区域内机场数量</th>
            </tr>
            </thead>
            <tbody id="airportsInCityBody"></tbody>
        </table>

    </div>
    <div title="紧急响应" data-options="iconCls:'icon-search'" style="padding:33%;">
        <a href="javascript:jinjixiangying()" class="easyui-linkbutton" iconCls="icon-reload">开始寻址</a>
    </div>
</div>

</body>
<script type="text/javascript">
    function start(){
        document.getElementById("p").style.display="block";
        var value = $('#p').progressbar('getValue');
        if (value < 100){
            value += Math.floor(Math.random() * 5);
            $('#p').progressbar('setValue', value);
            setTimeout(arguments.callee, 30);
        }

    };

    function alert_autoClose(title,msg,icon){
        var interval;
        var time=1000;
        var x=1;  //设置时间2s
        $.messager.alert(title,msg,icon,function(){});
        interval=setInterval(fun,time);
        function fun(){
            --x;
            if(x==0){
                clearInterval(interval);
                $(".messager-body").window('close');
            }
        };
    }

    function startLianxudongtai() {

        var radius = (document.getElementById("radius").value)*1000;
        top.removeServiceStationData();

        alert_autoClose("系统提示","开始计算","");

        top.lianxudongtai(radius);
        start();

    }
</script>
</html>